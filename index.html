<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>New Relic C Telemetry SDK: Main Page</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<link rel="stylesheet" type='text/css' href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
</head>
<body>
<nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand">New Relic C Telemetry SDK </a>
        </div>
    </div>
</nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div class="content" id="content">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                    <div style="margin-bottom: 15px;">
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">New Relic C Telemetry SDK Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://github.com/newrelic/open-source-office/blob/master/examples/categories/index.md#community-project"></a></p>
<h1>New Relic C Telemetry SDK</h1>
<div class="image">
<object type="image/svg+xml" data="https://github.com/newrelic/newrelic-telemetry-sdk-c/workflows/CI/badge.svg" alt="Build status"></object>
</div>
<p> <a href="https://github.com/newrelic/newrelic-telemetry-sdk-c/releases/"></a></p>
<p>What is the New Relic C Telemetry SDK?</p>
<ul>
<li>It's a helper library that supports sending New Relic data from within your C/C++ application.</li>
<li>Itâ€™s an example of "best practices" for sending us data.</li>
</ul>
<p><a href="https://docs.newrelic.com/docs/telemetry-data-platform/get-started/capabilities/telemetry-sdks-send-custom-telemetry-data-new-relic">The Telemetry SDK</a> provides you, the end-user programmer, with a <code>Client</code> that sends <code>Spans</code> to New Relic. Individual spans are collected together into batches (via a <code>SpanBatch</code> object), and clients send these batches. It serves as a foundation for getting open-standards based telemetry data like <a href="https://opencensus.io/">OpenCensus</a>, <a href="https://opentracing.io/">OpenTracing</a>, and <a href="https://opentelemetry.io/">OpenTelemetry</a> into New Relic. You can use this to build tracers/exporters, such as ones based on these open standards.</p>
<p>This SDK currently supports sending spans to the <a href="https://docs.newrelic.com/docs/understand-dependencies/distributed-tracing/trace-api/introduction-trace-api">Trace API</a>.</p>
<h2>Requirements</h2>
<p>The C Telemetry SDK is a wrapper around the <a href="https://github.com/newrelic/newrelic-telemetry-sdk-rust">Rust Telemetry SDK</a>. Minimal build requirements are:</p>
<ul>
<li>CMake 3.0</li>
<li>Rust 1.44</li>
</ul>
<p>For running tests under Linux, valgrind is required.</p>
<p>The C Telemetry SDK aims to support any platform that is <a href="https://doc.rust-lang.org/nightly/rustc/platform-support.html">supported by Rust</a>. It was tested on 64 bit Linux (GNU GCC 7.5), and on 64 bit Windows 2019 (Visual Studio 2019).</p>
<h2>Building the C Telemetry SDK</h2>
<p>The Rust Telemetry SDK is included into this project as a git submodule. Before building the C Telemetry SDK, make sure git submodules are initialized by running this command:</p>
<div class="fragment"><div class="line">git submodule update --init</div></div><!-- fragment --><h3>Linux</h3>
<p>For building the C Telemetry SDK on Linux, run the following commands:</p>
<div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div><div class="line">cmake -DCMAKE_BUILD_TYPE=Release ..</div><div class="line">make</div></div><!-- fragment --><p>To build and run tests:</p>
<div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div><div class="line">cmake -DENABLE_TESTS=on ..</div><div class="line">make</div><div class="line">make test</div></div><!-- fragment --><h3>Windows</h3>
<p>For building the C Telemetry SDK on Windows, run the following commands:</p>
<div class="fragment"><div class="line">mkdir build</div><div class="line">cd build</div><div class="line">cmake ..</div><div class="line">cmake --build .</div></div><!-- fragment --><h2>Getting Started</h2>
<p>In order to send telemetry data to New Relic APIs, you will need an Insert API key. to find out how to generate this key, see our <a href="https://docs.newrelic.com/docs/apis/get-started/intro-apis/types-new-relic-api-keys">docs</a>.</p>
<p>Refer to the <a href="https://newrelic.github.io/newrelic-telemetry-sdk-c/">API documentation</a> and to the [examples](examples).</p>
<p>This is a simple application that sends a single span: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="newrelic-telemetry-sdk_8h.html">newrelic-telemetry-sdk.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#ifdef OS_WINDOWS</span></div><div class="line"><span class="preprocessor">#include &lt;windows.h&gt;</span></div><div class="line"><span class="preprocessor">#else</span></div><div class="line"><span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main() {</div><div class="line"></div><div class="line">  <span class="comment">/* Obtain an API key from the environment. */</span></div><div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span>* api_key = getenv(<span class="stringliteral">&quot;NEW_RELIC_API_KEY&quot;</span>);</div><div class="line">  <span class="keywordflow">if</span> (!api_key) {</div><div class="line">    fprintf(stderr, <span class="stringliteral">&quot;NEW_RELIC_API_KEY not set\n&quot;</span>);</div><div class="line">    exit(1);</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">/* Initialize a configuration. */</span></div><div class="line">  <a class="code" href="newrelic-telemetry-sdk_8h.html#a99a2b1e5b5888aad6ebd3d7a76e5a260">nrt_client_config_t</a>* cfg = <a class="code" href="newrelic-telemetry-sdk_8h.html#af2e5dbd3241aa0fae6a39d968e7f8215">nrt_client_config_new</a>(api_key);</div><div class="line"></div><div class="line">  <span class="comment">/* Initialize a new client with the given API key. */</span></div><div class="line">  <a class="code" href="newrelic-telemetry-sdk_8h.html#a4403733697d516a9783bf7a388dd1a8a">nrt_client_t</a>* client = <a class="code" href="newrelic-telemetry-sdk_8h.html#a3aea03176136762fdf1813f1e5e4836b">nrt_client_new</a>(&amp;cfg);</div><div class="line"></div><div class="line">  <span class="comment">/* Create an empty span batch */</span></div><div class="line">  <a class="code" href="newrelic-telemetry-sdk_8h.html#abcd5eaf11a10866cfd002cbb703bf9f6">nrt_span_batch_t</a>* batch = <a class="code" href="newrelic-telemetry-sdk_8h.html#a8c40d1c3b9312191adea52b184ca3912">nrt_span_batch_new</a>();</div><div class="line"></div><div class="line">  <span class="comment">/* Create a span and add it to the batch */</span></div><div class="line">  {</div><div class="line"><span class="preprocessor">#ifdef OS_WINDOWS</span></div><div class="line">    SYSTEMTIME time;</div><div class="line">    GetSystemTime(&amp;time);</div><div class="line">    <a class="code" href="newrelic-telemetry-sdk_8h.html#ae23be5213758872c5fa3b74449dfa54c">nrt_time_t</a> time_ms = (time.wSecond * 1000) + time.wMilliseconds;</div><div class="line">#<span class="keywordflow">else</span></div><div class="line">    <span class="keyword">struct</span> timeval tv;</div><div class="line">    gettimeofday(&amp;tv, NULL);</div><div class="line">    <a class="code" href="newrelic-telemetry-sdk_8h.html#ae23be5213758872c5fa3b74449dfa54c">nrt_time_t</a> time_ms = (tv.tv_sec) * 1000 + (tv.tv_usec) / 1000;</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">    <a class="code" href="newrelic-telemetry-sdk_8h.html#a1f6241eff5adeefcfd1119d83a59d9a0">nrt_span_t</a>* span</div><div class="line">        = <a class="code" href="newrelic-telemetry-sdk_8h.html#aaeed09e498059ccf4fc9682485157e97">nrt_span_new</a>(<span class="stringliteral">&quot;e9f54a2c322d7578&quot;</span>, <span class="stringliteral">&quot;1b1bf29379951c1d&quot;</span>, time_ms);</div><div class="line">    <a class="code" href="newrelic-telemetry-sdk_8h.html#a6dc1df863a6700f499693816a994d345">nrt_span_set_name</a>(span, <span class="stringliteral">&quot;/index.html&quot;</span>);</div><div class="line">    <a class="code" href="newrelic-telemetry-sdk_8h.html#ad0cd85efecaf44330ee89d9960a9ceea">nrt_span_set_duration</a>(span, 2000);</div><div class="line">    <a class="code" href="newrelic-telemetry-sdk_8h.html#a77257a7df92e6de587823362c859607b">nrt_span_set_service_name</a>(span, <span class="stringliteral">&quot;Telemetry Application&quot;</span>);</div><div class="line"></div><div class="line">    <a class="code" href="newrelic-telemetry-sdk_8h.html#adfe8a5ef7a6a8d76e0c57101e90d467e">nrt_attributes_t</a>* attrs = <a class="code" href="newrelic-telemetry-sdk_8h.html#ab702269a661f9c4af8f80d29ab7208d0">nrt_attributes_new</a>();</div><div class="line">    <a class="code" href="newrelic-telemetry-sdk_8h.html#aeba804518f1e384e75ca49867f74bdb2">nrt_attributes_set_int</a>(attrs, <span class="stringliteral">&quot;retries&quot;</span>, 3);</div><div class="line">    <a class="code" href="newrelic-telemetry-sdk_8h.html#ad9de189fd63c1c2857dc35d79375db18">nrt_attributes_set_string</a>(attrs, <span class="stringliteral">&quot;username&quot;</span>, <span class="stringliteral">&quot;user&quot;</span>);</div><div class="line">    <a class="code" href="newrelic-telemetry-sdk_8h.html#a250575d3f85f6c7011ad9c79cd344320">nrt_span_set_attributes</a>(span, &amp;attrs);</div><div class="line"></div><div class="line">    <a class="code" href="newrelic-telemetry-sdk_8h.html#ae64c6667ad776f5168710d567760f5bd">nrt_span_batch_record</a>(batch, &amp;span);</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="comment">/* Queue the span batch */</span></div><div class="line">  <a class="code" href="newrelic-telemetry-sdk_8h.html#aec889ef63f51ede4ce3b5f97c72972a2">nrt_client_send</a>(client, &amp;batch);</div><div class="line"></div><div class="line">  <span class="comment">/* Wait for the batch to be sent and shut down the client. */</span></div><div class="line">  <a class="code" href="newrelic-telemetry-sdk_8h.html#a038f9f9b680a10c2494549a9f3f14fed">nrt_client_shutdown</a>(&amp;client);</div><div class="line">}</div></div><!-- fragment --><h2>Find and use your data</h2>
<p>Tips on how to find and query your data in New Relic:</p><ul>
<li><a href="https://docs.newrelic.com/docs/understand-dependencies/distributed-tracing/trace-api/introduction-trace-api#view-data">Find trace/span data</a></li>
</ul>
<p>For general querying information, see:</p><ul>
<li><a href="https://docs.newrelic.com/docs/query-your-data/explore-query-data/explore-data/introduction-querying-new-relic-data">Query New Relic data</a></li>
<li><a href="https://docs.newrelic.com/docs/query-your-data/nrql-new-relic-query-language/get-started/introduction-nrql-new-relics-query-language">Intro to NRQL</a></li>
</ul>
<h2>Support</h2>
<p>New Relic hosts and moderates an online forum where customers can interact with New Relic employees as well as other customers to get help and share best practices. Like all official New Relic open source projects, there's a related Community topic in the New Relic Explorers Hub. You can find this project's topic/threads in the <a href="https://discuss.newrelic.com/t/new-relic-c-telemetry-sdk/114557">Telemetry SDK section of Explorers Hub</a></p>
<h2>Contributing</h2>
<p>We encourage your contributions to improve the C Telemetry SDK! Keep in mind when you submit your pull request, you'll need to sign the CLA via the click-through using CLA-Assistant. You only have to sign the CLA one time per project. If you have any questions, or to execute our corporate CLA, required if your contribution is on behalf of a company, please drop us an email at <a href="#" onclick="location.href='mai'+'lto:'+'ope'+'ns'+'our'+'ce'+'@ne'+'wr'+'eli'+'c.'+'com'; return false;">opens<span style="display: none;">.nosp@m.</span>ourc<span style="display: none;">.nosp@m.</span>e@new<span style="display: none;">.nosp@m.</span>reli<span style="display: none;">.nosp@m.</span>c.com</a>.</p>
<h2>License</h2>
<p>The C Telemetry SDK is licensed under the <a href="http://apache.org/licenses/LICENSE-2.0.txt">Apache 2.0</a> License.</p>
<p>The C Telemetry SDK also uses source code from third-party libraries. You can find full details on which libraries are used and the terms under which they are licensed in the third-party notices document.</p>
<h3>Limitations</h3>
<p>The New Relic Telemetry APIs are rate limited. Please reference the documentation for <a href="https://docs.newrelic.com/docs/introduction-new-relic-metric-api">New Relic Metric API</a> and <a href="https://docs.newrelic.com/docs/apm/distributed-tracing/trace-api/trace-api-general-requirements-limits">New Relic Trace API requirements and limits</a> on the specifics of the rate limits. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Sep 16 2020 22:00:21 for New Relic C Telemetry SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</div>
</div>
</div>
</div>
</div>
</body>
</html>
